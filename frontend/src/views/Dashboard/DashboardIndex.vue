<script setup lang="ts">
import { computed, ref } from 'vue'
import { useNoneBotStore } from '@/stores'
import CreateBotIndex from '@/components/Modals/CreateBot/CreateBotIndex.vue'

const store = useNoneBotStore()

const createBotModal = ref<InstanceType<typeof CreateBotIndex> | null>()

const getBotIsRunning = computed(() => {
  return store.getExtendedBotsList().filter((bot) => bot.is_running).length
})
</script>

<template>
  <CreateBotIndex ref="createBotModal" />

  <div class="grid gap-4">
    <div class="grid gap-4 grid-cols-1 xl:grid-cols-3">
      <div class="col-span-2 card bg-primary/[.2]">
        <div class="card-body justify-center gap-4">
          <h2 class="card-title">æ¬¢è¿ ğŸ‘‹</h2>
          <div class="text-sm">
            <p>è¿™æ˜¯ä»€ä¹ˆï¼Ÿè¿™æ˜¯ NoneBot CLI å›¾å½¢åŒ–æ§åˆ¶ç«¯</p>
            <p>å¯ä»¥å¹²å•¥ï¼Ÿåˆ›å»ºå¹¶åŒæ—¶ç®¡ç†å¤šä¸ª NoneBot å®ä¾‹</p>
            <p>
              æ„è§åé¦ˆ&äº¤æµ:
              <a class="link" href="https://nonebot.dev/docs/community/contact" target="_blank">
                ç›´è¾¾é“¾æ¥
              </a>
            </p>
          </div>
          <div class="card-actions justify-start">
            <button class="btn btn-primary btn-sm font-normal text-white">å³åˆ»ä¸Šæ‰‹</button>
          </div>
        </div>
      </div>

      <div class="grid gap-4 grid-cols-2 xl:grid-cols-none">
        <div class="stats stats-vertical lg:stats-horizontal">
          <div class="stat">
            <div class="stat-title">å·²æœ‰å®ä¾‹</div>
            <div class="stat-value">{{ store.getExtendedBotsList().length }}</div>
          </div>

          <div class="stat">
            <div class="stat-title">æ­£åœ¨è¿è¡Œ</div>
            <div class="stat-value">{{ getBotIsRunning }}</div>
          </div>
        </div>

        <div class="card bg-base-200">
          <div class="card-body items-center">
            <p>å®ä¾‹æ“ä½œ</p>
            <div class="card-actions justify-center gap-8">
              <button
                class="btn btn-md lg:btn-sm btn-primary font-normal text-white"
                @click="createBotModal?.openModal()"
              >
                åˆ›å»ºå®ä¾‹
              </button>
              <button class="btn btn-md lg:btn-sm btn-primary font-normal btn-outline">
                æ·»åŠ å®ä¾‹
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="grid gap-4 grid-cols-3">
      <div class="stats shadow-md border border-base-200">
        <div class="stat">
          <div class="stat-title">Total Page Views</div>
          <div class="stat-value">89,400</div>
          <div class="stat-desc">21% more than last month</div>
        </div>
      </div>

      <div class="stats shadow-md border border-base-200">
        <div class="stat">
          <div class="stat-title">Total Page Views</div>
          <div class="stat-value">89,400</div>
          <div class="stat-desc">21% more than last month</div>
        </div>
      </div>

      <div class="stats shadow-md border border-base-200">
        <div class="stat">
          <div class="stat-title">Total Page Views</div>
          <div class="stat-value">89,400</div>
          <div class="stat-desc">21% more than last month</div>
        </div>
      </div>
    </div>
    <div></div>
  </div>
</template>
